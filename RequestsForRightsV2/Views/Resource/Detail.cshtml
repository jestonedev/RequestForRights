@using RequestsForRights.Infrastructure.Security.Interfaces
@model RequestsForRights.Domain.Entities.Resource

@{
    ViewBag.Title = "Просмотр информационного ресурса";
    Layout = "~/Views/Shared/_Layout.cshtml";
    var securityService = (IResourceSecurityService)ViewData["SecurityService"];
}

<h2>Информационный ресурс # @Model.IdResource</h2>

@Html.Partial("ErrorAlert")

<div>
    <ul class="nav nav-tabs" role="tablist">
        <li role="presentation" class="active">
            <a href="#general" aria-controls="general" role="tab" data-toggle="tab">Сведения о ресурсе</a>
        </li>
        <li role="presentation">
            <a href="#rights" aria-controls="rights" role="tab" data-toggle="tab">Права</a>
        </li>
        <li role="presentation">
            <a href="#owner" aria-controls="owner" role="tab" data-toggle="tab">Владелец</a>
        </li>
        <li role="presentation">
            <a href="#operator" aria-controls="operator" role="tab" data-toggle="tab">Оператор</a>
        </li>
        <li role="presentation">
            <a href="#acts" aria-controls="acts" role="tab" data-toggle="tab">Акты</a>
        </li>
    </ul>

    <div class="tab-content">
        <div role="tabpanel" class="tab-pane fade in active rr-tab-pane" id="general">
            <div class="panel panel-default">
                <div class="panel-heading">Общие сведения</div>
                <div class="panel-body">
                    <dl class="dl-horizontal">
                        <dt>@Html.DisplayNameFor(r => r.Name)</dt>
                        <dd>@Model.Name</dd>
                        <dt>@Html.DisplayNameFor(r => r.Description)</dt>
                        <dd>@Model.Description</dd>
                        <dt>@Html.DisplayNameFor(r => r.IdResourceGroup)</dt>
                        <dd>@Model.ResourceGroup.Name</dd>
                        <dt>@Html.DisplayNameFor(r => r.IdDepartment)</dt>
                        <dd>@Model.Department.Name</dd>
                    </dl>
                </div>
            </div>
            <div class="panel panel-default">
                <div class="panel-heading">Сетевые адреса в сети "Интернет"</div>
                <ul class="list-group">
                    <li class="list-group-item">
                        <dl class="dl-horizontal">
                            <dt>Заголовок</dt>
                            <dd>Описание</dd>
                            <dt>Заголовок</dt>
                            <dd>Описание</dd>
                        </dl>
                    </li>
                    <li class="list-group-item">
                        <dl class="dl-horizontal">
                            <dt>Заголовок</dt>
                            <dd>Описание</dd>
                            <dt>Заголовок</dt>
                            <dd>Описание</dd>
                        </dl>
                    </li>
                </ul>
            </div>
            <div class="panel panel-default">
                <div class="panel-heading">Сведения о территориальном размещении</div>
                <ul class="list-group">
                    <li class="list-group-item">
                        <dl class="dl-horizontal">
                            <dt>Заголовок</dt>
                            <dd>Описание</dd>
                            <dt>Заголовок</dt>
                            <dd>Описание</dd>
                        </dl>
                    </li>
                    <li class="list-group-item">
                        <dl class="dl-horizontal">
                            <dt>Заголовок</dt>
                            <dd>Описание</dd>
                            <dt>Заголовок</dt>
                            <dd>Описание</dd>
                        </dl>
                    </li>
                </ul>
            </div>
        </div>
        <div role="tabpanel" class="tab-pane fade rr-tab-pane" id="rights">
            <ul class="list-group">
                @if (Model.ResourceRights != null)
                {
                    for (var i = 0; i < Model.ResourceRights.Count(r => !r.Deleted); i++)
                    {
                        <li class="list-group-item">
                            <dl class="dl-horizontal">
                                <dt>@Html.DisplayNameFor(r => r.ResourceRights[i].Name)</dt>
                                <dd>@Model.ResourceRights[i].Name</dd>
                                <dt>@Html.DisplayNameFor(r => r.ResourceRights[i].Description)</dt>
                                <dd>@Model.ResourceRights[i].Description</dd>
                            </dl>
                        </li>
                    }
                }
            </ul>
        </div>
        <div role="tabpanel" class="tab-pane fade rr-tab-pane" id="owner">
            <div class="panel panel-default">
                <div class="panel-heading">Общие сведения</div>
                <div class="panel-body">
                    <dl class="dl-horizontal">
                        <dt>Заголовок</dt>
                        <dd>Описание</dd>
                        <dt>Заголовок</dt>
                        <dd>Описание</dd>
                    </dl>
                </div>
            </div>
            <div class="panel panel-default">
                <div class="panel-heading">Должностные лица</div>
                <ul class="list-group">
                    <li class="list-group-item">
                        <dl class="dl-horizontal">
                            <dt>Заголовок</dt>
                            <dd>Описание</dd>
                            <dt>Заголовок</dt>
                            <dd>Описание</dd>
                        </dl>
                    </li>
                    <li class="list-group-item">
                        <dl class="dl-horizontal">
                            <dt>Заголовок</dt>
                            <dd>Описание</dd>
                            <dt>Заголовок</dt>
                            <dd>Описание</dd>
                        </dl>
                    </li>
                </ul>
            </div>
        </div>
        <div role="tabpanel" class="tab-pane fade rr-tab-pane" id="operator">
            <div class="panel panel-default">
                <div class="panel-heading">Общие сведения</div>
                <div class="panel-body">
                    <dl class="dl-horizontal">
                        <dt>Заголовок</dt>
                        <dd>Описание</dd>
                        <dt>Заголовок</dt>
                        <dd>Описание</dd>
                    </dl>
                </div>
            </div>
            <div class="panel panel-default">
                <div class="panel-heading">Должностные лица</div>
                <ul class="list-group">
                    <li class="list-group-item">
                        <dl class="dl-horizontal">
                            <dt>Заголовок</dt>
                            <dd>Описание</dd>
                            <dt>Заголовок</dt>
                            <dd>Описание</dd>
                        </dl>
                    </li>
                    <li class="list-group-item">
                        <dl class="dl-horizontal">
                            <dt>Заголовок</dt>
                            <dd>Описание</dd>
                            <dt>Заголовок</dt>
                            <dd>Описание</dd>
                        </dl>
                    </li>
                </ul>
            </div>
        </div>
        <div role="tabpanel" class="tab-pane fade rr-tab-pane" id="acts">
            <div class="panel panel-default">
                <div class="panel-heading">Правовые акты, определяющие оператора ИС</div>
                <ul class="list-group">
                    <li class="list-group-item">
                        <dl class="dl-horizontal">
                            <dt>Заголовок</dt>
                            <dd>Описание</dd>
                            <dt>Заголовок</dt>
                            <dd>Описание</dd>
                        </dl>
                    </li>
                    <li class="list-group-item">
                        <dl class="dl-horizontal">
                            <dt>Заголовок</dt>
                            <dd>Описание</dd>
                            <dt>Заголовок</dt>
                            <dd>Описание</dd>
                        </dl>
                    </li>
                </ul>
            </div>
            <div class="panel panel-default">
                <div class="panel-heading">Правовые акты, определяющие порядок размещения и использования информации, размещенной в ИС</div>
                <ul class="list-group">
                    <li class="list-group-item">
                        <dl class="dl-horizontal">
                            <dt>Заголовок</dt>
                            <dd>Описание</dd>
                            <dt>Заголовок</dt>
                            <dd>Описание</dd>
                        </dl>
                    </li>
                    <li class="list-group-item">
                        <dl class="dl-horizontal">
                            <dt>Заголовок</dt>
                            <dd>Описание</dd>
                            <dt>Заголовок</dt>
                            <dd>Описание</dd>
                        </dl>
                    </li>
                </ul>
            </div>
            <div class="panel panel-default">
                <div class="panel-heading">Правовые акты, устанавливающие полномочия размещения субъектами контроля информации в ИС</div>
                <ul class="list-group">
                    <li class="list-group-item">
                        <dl class="dl-horizontal">
                            <dt>Заголовок</dt>
                            <dd>Описание</dd>
                            <dt>Заголовок</dt>
                            <dd>Описание</dd>
                        </dl>
                    </li>
                    <li class="list-group-item">
                        <dl class="dl-horizontal">
                            <dt>Заголовок</dt>
                            <dd>Описание</dd>
                            <dt>Заголовок</dt>
                            <dd>Описание</dd>
                        </dl>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</div>

<div class="text-center rr-edit-panel">
    <div class="btn-group" role="group" aria-label="Панель действий">
        <a href="@Url.Action("Index")"
           class="btn btn-default"
           title="Вернуться к перечню ресурсов"
           aria-label="Назад">
            <span class="glyphicon glyphicon-circle-arrow-left" aria-hidden="true"></span>
            Назад
        </a>
        @if (securityService.CanUpdate(Model))
        {
            <a href="@Url.Action("Update", new {id = Model.IdResource, returnUri = Url.Action("Detail")})"
               class="btn btn-default"
               title="Изменить ресурс"
               aria-label="Изменить">
                <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
                Изменить
            </a>
        }
        @if (securityService.CanDelete(Model))
        {
            <a href="@Url.Action("Delete", new {id = Model.IdResource})" id="delete-button"
               data-success-redirect-to="@Url.Action("Index")"
               class="btn btn-danger"
               title="Удалить ресурс"
               aria-label="Удалить">
                <span class="glyphicon glyphicon-remove" aria-hidden="true"></span>
                Удалить
            </a>
        }
    </div>
</div>

@Html.Partial("DeleteModal", new
{
    Title = "Подтвердите удаление",
    Description = "Вы действительно хотите удалить этот ресурс?"
})

@section scripts {
    @Scripts.Render("~/bundles/rr-detail.update.common")
}