@using RequestsForRightsV2.Infrastructure.Security
@model RequestsForRights.Domain.Entities.Resource

@{
    ViewBag.Title = "Просмотр информационного ресурса";
    Layout = "~/Views/Shared/_Layout.cshtml";
    var securityService = (ResourceSecurityService)ViewData["SecurityService"];
}

<h2>Информационный ресурс # @Model.IdResource</h2>

@Html.Partial("ErrorAlert")

<dl class="dl-horizontal">
    <dt>@Html.DisplayNameFor(r => r.Name)</dt>
    <dd>@Model.Name</dd>
    <dt>@Html.DisplayNameFor(r => r.Description)</dt>
    <dd>@Model.Description</dd>
</dl>

<div class="text-center rr-edit-panel">
    <div class="btn-group" role="group" aria-label="Панель действий">
        <a href="@Url.Action("Index")"
           class="btn btn-default"
           title="Вернуться к перечню"
           aria-label="Назад">
            <span class="glyphicon glyphicon-circle-arrow-left"></span>
            Назад
        </a>
        @if (securityService.CanUpdate(Model))
        {
            <a href="@Url.Action("Update", new {id = Model.IdResource, returnUri = Url.Action("Detail")})"
               class="btn btn-default"
               title="Изменить запись"
               aria-label="Изменить запись">
                <span class="glyphicon glyphicon-pencil"></span>
                Изменить
            </a>
        }
        @if (securityService.CanDelete(Model))
        {
            <a href="@Url.Action("Delete", new {id = Model.IdResource})" id="delete-button"
               data-success-redirect-to="@Url.Action("Index")"
               class="btn btn-danger"
               title="Вернуться к перечню"
               aria-label="Удалить">
                <span class="glyphicon glyphicon-remove"></span>
                Удалить
            </a>
        }
    </div>
</div>

@Html.Partial("DeleteModal", new
{
    Title = "Подтвердите удаление",
    Description = "Вы действительно хотите удалить этот ресурс?"
})

@section scripts {
    @Scripts.Render("~/bundles/detail.common")
}